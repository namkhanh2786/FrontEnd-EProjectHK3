<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MUSIC - OnlineShop4DVD</title>
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script> -->
    <link rel="stylesheet" href="/css/music.css">
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <!-- Audio Section -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.1/underscore-min.js"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- jQuery and Popper.js -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>

    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <div class="modal fade" id="lyricsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
            <div class="modal-body">
                (Verse 1)
                In the moonlit night, where shadows dance,
                Whispers of a love, in a fleeting trance.
                Stars above, tell tales untold,
                In the symphony of time, our story unfolds.
                
                (Chorus)
                Eternal echo in the cosmic sea,
                A love that binds, wild and free.
                Hearts entwined in a timeless song,
                Forever echoes, where we belong.
                
                (Verse 2)
                Through the echoes of the ancient trees,
                A melody floats in the gentle breeze.
                Mountains high and valleys low,
                In this timeless dance, our spirits glow.
                
                (Chorus)
                Eternal echo in the cosmic sea,
                A love that binds, wild and free.
                Hearts entwined in a timeless song,
                Forever echoes, where we belong.
                
                (Bridge)
                In the tapestry of the endless night,
                Our love ignites, a celestial light.
                Through the galaxies, hand in hand,
                A journey written in the shifting sand.
                
                (Verse 3)
                Whispers of love in the morning dew,
                Footprints of time, our rendezvous.
                Sunsets paint a canvas so divine,
                In this eternal echo, our souls entwine.
                
                (Chorus)
                Eternal echo in the cosmic sea,
                A love that binds, wild and free.
                Hearts entwined in a timeless song,
                Forever echoes, where we belong.
                
                (Outro)
                As the stars bid farewell to the day,
                Our love persists, it will never sway.
                In the cosmic dance, a promise we keep,
                Eternal echoes, in love so deep.
            </div>
            </div>
        </div>
    </div> 

    <div id="music-player">
      <div class="audio-player">
        <section id="art" hidden>
            <div class="player">
              <img>
            </div>
            <div class="wide">
              <img>
            </div>
          </section>
          
          <section id="playlist">
            <table id="playlist-table" class="no-select col-lg-8 col-md-8 col-sm-12">
                <thead>
                    <th>&nbsp;</th>
                    <th>Title</th>
                    <th>Artist</th>
                    <th>&nbsp;</th>
                </thead>
                <tbody></tbody>
                
            </table>
            <section id="album_info" class="col-lg-4 col-md-4 col-sm-12">
                <div id="album-image" class="col-12">
                    <!-- Album image goes here -->
                    <img src="https://images.genius.com/bacae5471acb7b1a4ef445c92e049848.1000x1000x1.jpg" alt="Album Art">
                </div>
                <label id="album-name" class="col-lg-10 col-md-10 col-sm-12">ALBUM NAME HERE</label>
                <div id="album-buttons" class="col-lg-2 col-md-2 col-sm-12">
                    <div class="dropdown">
                        <button id="dots-button" class="dots-button" data-bs-toggle="dropdown">&#8286;</button>
                        <ul class="dropdown-menu" id="dr-item">
                            <li>
                                <div class="custom-checkbox btn btn-secondary" onclick="toggleFavorite()">
                                    <input type="checkbox" id="id-of-input" hidden/>
                                    <i class="fa fa-heart-o"></i>
                                    <span>Add to Favorite</span>
                                </div>  
                            </li>
                            <hr>
                            <li><button type="button" class="btn btn-warning" data-toggle="modal" data-target="#lyricsModal">
                                View Lyrics</button></li>
                        </ul>
                    </div>
                    <script>
                        function toggleFavorite() {
                            var checkbox = document.querySelector('.custom-checkbox input[type="checkbox"]');
                            var heartIcon = document.querySelector('.custom-checkbox .fa');
                            var isChecked = checkbox.checked;
                    
                            if (isChecked) {
                                checkbox.checked = false;
                                heartIcon.classList.remove('fa-heart');
                                heartIcon.classList.add('fa-heart-o');
                                alert("Removed from Favorites");
                            } else {
                                checkbox.checked = true;
                                heartIcon.classList.remove('fa-heart-o');
                                heartIcon.classList.add('fa-heart');
                                alert("Added to Favorites");
                            }
                        }
                    </script>
                </div>
                <div id="album-addtocart" class="col-lg-12 col-md-12 col-sm-12">
                    <button class="addtocart">
                        <div class="pretext">
                            <svg style="color: white" xmlns="http://www.w3.org/2000/svg" width="2vw" height="2vw" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16"> <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" fill="white"></path> </svg> ADD TO CART
                        </div>
                        
                        <div class="pretext done">
                          <div class="posttext"><svg style="color: white" xmlns="http://www.w3.org/2000/svg" width="2vw" height="2vw" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16"> <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" fill="white"></path> </svg> ADDED</div>
                        </div>
                        
                    </button>
                </div>
                <script>
                    const button = document.querySelector(".addtocart");
                    const done = document.querySelector(".done");
                    console.log(button);
                    let added = false;

                    button.addEventListener('click', () => {
                    if (added) {
                        done.style.transform = "translate(-110%) skew(-40deg)";
                        added = false;
                    } else {
                        done.style.transform = "translate(0px)";
                        added = true;
                    }
                    });
                </script>
            </section>
        </section>      
          
        <footer id="interactions", style="color: white;">
        <div class="tracking-wrap">
            <span class="song-current-time">--:--</span>
            <input class="tracking-slider range" type="range" min="0" value="0" step="1">
            <span class="song-length">--:--</span>
        </div>
        
        <div class="controls-bar">
            <section id="controls">
            <span class="fa fa-random shuffle"></span>
            <span class="fa fa-fast-backward previous"></span>
            <span class="fa fa-play play-pause"></span>
            <span class="fa fa-fast-forward next"></span>
            <span class="fa fa-repeat repeat on"></span>
            </section>
            
            <div id="volume">
            <span class="fa fa-volume-down"></span>
            <input class="volume-slider range" type="range" max="1" min="0" step="0.01" value="0.8">
            <span class="fa fa-volume-up"></span>
            </div>
        </div>
        </footer>
          
        <audio id="player"></audio>
    </div>
    <script>
        'use strict';

        /**
         * A music player ... cause why not.
         * Hotkeys:
         *   a - previous
         *   d / n - next
         *   s / p - play / pause
         *   e / r - repeat
         *   q - shuffle
         *
         * @author Holly Springsteen
         */

        const colors = {
        aqua: {
            25: '#A7DCCD',
            50: '#5FBFA4',
            80: '#2F7561',
        },
        metal: {
            5: '#F3F3F1',
            20: '#CFD0C8',
            50: '#868975',
            80: '#36372F',
            90: '#272822',
        },
        };

        // Control button elements
        const buttons = {
        shuffle: document.querySelector('#controls .shuffle'),
        previous: document.querySelector('#controls .previous'),
        playPause: document.querySelector('#controls .play-pause'),
        next: document.querySelector('#controls .next'),
        repeat: document.querySelector('#controls .repeat'),
        };

        // Range & Time elements
        const songCurrentTime = document.querySelector('.song-current-time');
        const songLength = document.querySelector('.song-length');
        const trackingSlider = document.querySelector('.tracking-slider');
        const volumeSlider = document.querySelector('.volume-slider');

        // Art
        const artPlayer = document.querySelector('#art .player');
        const playerArt = document.querySelector('#art .player img');
        const wideArt = document.querySelector('#art .wide img');

        // Playlist
        const playlistBody = document.querySelector('#playlist tbody');
        let playlistPlay = document.querySelectorAll('#playlist .play-pause');
        let listItems = document.querySelectorAll('#playlist tbdoy tr');

        // Audio Element
        const audio = document.getElementById('player');

        // Base route for archive url
        const archiveBase = 'http://archive.org/download/';

        /**
         * A base list of songs and the meta data for them.
         *
        {
        title: '',
        artist: '',
        duration: 0,
        album: {
            title: '',
            art: {
            square: '',
            wide: '',
            },
        },
        url: `${archiveBase}`,
        },
        */
        const songList = [
        {
            title: 'Titanium',
            artist: 'David Guetta ft. Sia',
            album: {
                art: {
                    square: 'http://4.bp.blogspot.com/-HJ1iG3uzVn8/TgSLn6uwRXI/AAAAAAAAAJg/qkaGRP4Lg2Q/s1600/David-Guetta-Nothing-But-The-Beat-Official-Album-Cover.jpg'
                },
            },
            url: `${archiveBase}/azeplaylist/David%20Guetta%20feat.%20Sia%20-%20Titanium.mp3`,
        },
        {
            title: 'Titanium',
            artist: 'David Guetta ft. Sia',
            album: {
                art: {
                    square: 'http://4.bp.blogspot.com/-HJ1iG3uzVn8/TgSLn6uwRXI/AAAAAAAAAJg/qkaGRP4Lg2Q/s1600/David-Guetta-Nothing-But-The-Beat-Official-Album-Cover.jpg'
                },
            },
            url: `${archiveBase}/azeplaylist/David%20Guetta%20feat.%20Sia%20-%20Titanium.mp3`,
        },
        {
            title: 'Titanium',
            artist: 'David Guetta ft. Sia',
            album: {
                art: {
                    square: 'http://4.bp.blogspot.com/-HJ1iG3uzVn8/TgSLn6uwRXI/AAAAAAAAAJg/qkaGRP4Lg2Q/s1600/David-Guetta-Nothing-But-The-Beat-Official-Album-Cover.jpg'
                },
            },
            url: `${archiveBase}/azeplaylist/David%20Guetta%20feat.%20Sia%20-%20Titanium.mp3`,
        },
        ];
        // Function to get the duration of a song asynchronously
        async function getSongDuration(url) {
            const response = await fetch(url);
            const buffer = await response.arrayBuffer();
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            return new Promise(resolve => {
                audioContext.decodeAudioData(buffer, (audioBuffer) => {
                    const duration = audioBuffer.duration;
                    resolve(duration);
                });
            });
        }

        // Loop through each song and get the duration
        songList.forEach(async (song) => {
            const duration = await getSongDuration(song.url);
            // Update the duration in seconds
            song.duration = Math.round(duration);
        });

        // Add a delay or use a callback to ensure the asynchronous operations complete before using the duration
        setTimeout(() => {
            console.log(songList);
        }, 2000); // You may need to adjust the delay based on the size of your audio files and network speed

        /**
         * Based on the class list for a given element toggle the class(es) received.
         * Can accept both string with classes separated by spaces and an array of classes.
         *
         * @param {} element The dom element for which to toggle classes.
         * @param {string|string[]} classes The classes to be toggled on or off.
         */
        function toggleClasses(element, classes) {
        const currentClasses = new Set(element.classList);
        // Separate string formatted classes into an array or accept array param
        const newClasses = (_.isString(classes)) ? classes.split(' ') : classes;

        for (const className of newClasses) {
            if (currentClasses.has(className)) {
            element.classList.remove(className);
            } else {
            element.classList.add(className);
            }
        }
        }

        /**
         * Toggle a boolean value.
         *
         * @param {boolean} boolean The boolean value to be toggled true or false.
         * @return {boolean} Returns the opposite boolean value to the received.
         */
        function toggleBoolean(boolean) {
        return (!boolean);
        }

        /**
         * Convert seconds into a usable format for time.
         *
         * @param {number|string} seconds The amount of seconds to convert.
         * @return {string} Returns a time formatted string (--:--:--).
         */
        function secondsToHms(seconds) {
        const time = {
            hours: String(Math.floor(Number(seconds) / 3600)),
            minutes: String(Math.floor(Number(seconds) % 3600 / 60)),
            seconds: String(Math.floor(Number(seconds) % 3600 % 60)),
        };

        if (time.hours && time.hours < 10) {
            time.hours = `0${time.hours}`;
        }
        if (time.minutes && time.minutes < 10) {
            time.minutes = `0${time.minutes}`;
        }
        if (time.seconds && time.seconds < 10) {
            time.seconds = `0${time.seconds}`;
        }

        if (time.hours !== '00') {
            return `${time.hours}:${time.minutes}:${time.seconds}`;
        } else {
            return `${time.minutes}:${time.seconds}`;
        }
        }

        /**
         * The base setup for any given audio player.
         */
        class Player {
        constructor() {
            this.playing = (new Set(buttons.playPause.classList).has('on'));
            this.shuffle = (new Set(buttons.shuffle.classList).has('on'));
            this.repeat = (new Set(buttons.repeat.classList).has('on'));

            this.songIndex = 0;
            this.previousSong = songList.length - 1;

            this.song = songList[this.songIndex];

            this.randomOrder = new Set();
            this.randomIndex = 0;

            this.volume = 0.8;
        }

        /**
         * Update the meta data for the current song.
         *
         * @param {number} songIndex Optional param to force set the index of the song.
         */
        updateSong(songIndex) {
            this.previousSong = this.songIndex;
            this.songIndex = songIndex || this.songIndex;
            this.song = songList[this.songIndex];
            const song = this.song;

            audio.src = song.url;
            trackingSlider.value = 0;
            this.updateSongRangeValues();
            songLength.innerHTML = secondsToHms(song.duration);
            trackingSlider.max = song.duration;

            playerArt.src = song.album.art.square;
            wideArt.src = song.album.art.wide;

            document.querySelector(`tr[data-index="${this.previousSong}"]`).classList.remove('playing');
            toggleClasses(document.querySelector(`tr[data-index="${this.songIndex}"]`), 'playing');
        }

        /**
         * Play the audio.
         */
        play() {
            audio.play();
        }

        /**
         * Pause the audio.
         */
        pause() {
            audio.pause();
        }

        /**
         * Seek in the audio, update the time based on range value selected.
         */
        seek() {
            audio.currentTime = Number(trackingSlider.value);
            songCurrentTime.innerHTML = secondsToHms(audio.currentTime);
        }

        /**
         * Update the range values based on the current time in the song.
         */
        updateSongRangeValues() {
            const value = (trackingSlider.value / this.song.duration) * 100;
            const buffer = 0;

            songCurrentTime.innerHTML = secondsToHms(trackingSlider.value);

            trackingSlider.style.background = `linear-gradient(to right, ${colors.aqua[50]} 0%, ${colors.aqua[50]} ${value}%, ${colors.metal[50]} ${value}%, ${colors.metal[50]} ${buffer}%, ${colors.metal[80]} ${buffer}%, ${colors.metal[80]} 100%)`;
        }

        /**
         * Adjust the volume.
         */
        adjustVolume() {
            const {value} = volumeSlider;
            const buffer = 0;

            audio.volume = value;

            volumeSlider.style.background = `linear-gradient(to right, ${colors.aqua[80]} 0%, ${colors.aqua[80]} ${value * 100}%, ${colors.metal[50]} ${value * 100}%, ${colors.metal[50]} ${buffer}%, ${colors.metal[80]} ${buffer}%, ${colors.metal[80]} 100%)`;
        }
        }

        /**
         * The setup for any set of controls for the player.
         */
        class Controls extends Player {
        /**
         * Play or pause the current list item.
         */
        playPause() {
            this.playing = toggleBoolean(this.playing);
            toggleClasses(buttons.playPause, 'on fa-play fa-pause');
            toggleClasses(artPlayer, 'playing');

            const currentClasses = new Set(buttons.playPause.classList);

            if (currentClasses.has('on')) {
            this.play();
            } else {
            this.pause();
            }
        }

        /**
         * Go to the next item in the list.
         */
        next() {
            this.previousSong = this.songIndex;
            let playNext = true;

            toggleClasses(document.querySelector(`tr[data-index="${this.songIndex}"]`), 'playing');

            if (this.shuffle) {
            this.randomIndex++;

            if (this.randomIndex >= this.randomOrder.size) {
                this.randomIndex = 0;

                playNext = (this.repeat);
            }

            this.songIndex = Array.from(this.randomOrder)[this.randomIndex];
            } else {
            this.songIndex++;

            if (this.songIndex >= songList.length) {
                this.songIndex = 0;

                playNext = (this.repeat);
            }
            }

            this.updateSong();

            if (this.playing) {
            if (playNext) {
                this.play();
            } else {
                this.playPause();
            }
            }
        }

        /**
         * Go to the previous item in the list.
         */
        previous() {
            toggleClasses(document.querySelector(`tr[data-index="${this.songIndex}"]`), 'playing');

            if (this.shuffle) {
            if (this.randomIndex === 0) {
                this.randomIndex = this.randomOrder.size;
            }
            this.randomIndex--;

            this.songIndex = Array.from(this.randomOrder)[this.randomIndex];
            } else {
            if (this.songIndex === 0) {
                this.songIndex = songList.length;
            }
            this.songIndex--;
            }

            this.updateSong();

            if (this.playing) {
            this.play();
            }
        }

        /**
         * Shuffle the list, play in a random order.
         */
        toggleShuffle() {
            this.shuffle = toggleBoolean(this.shuffle);
            toggleClasses(buttons.shuffle, 'on');
            const currentClasses = new Set(buttons.shuffle.classList);

            if (currentClasses.has('on')) {
            this.randomOrder = new Set();
            this.randomIndex = 0;

            let randomIndex = this.songIndex;

            for (let index = 0; index < songList.length; index++) {
                // While loop to ensure that the index being added to the random order is unique, else changes the index value
                while (this.randomOrder.has(randomIndex)) {
                randomIndex = Math.floor(Math.random() * songList.length);
                }

                this.randomOrder.add(randomIndex);
            }
            }
        }

        /**
         * Repeat/loop the list that is currently playing.
         */
        toggleRepeat() {
            this.repeat = toggleBoolean(this.repeat);
            toggleClasses(buttons.repeat, 'on');
        }
        }


        // Instantiate the controls
        const controls = new Controls();

        // Add event listeners for the buttons
        buttons.playPause.addEventListener('click', () => {
        controls.playPause();
        });
        buttons.next.addEventListener('click', () => {
        controls.next();
        });
        buttons.previous.addEventListener('click', () => {
        controls.previous();
        });
        buttons.shuffle.addEventListener('click', () => {
        controls.toggleShuffle();
        });
        buttons.repeat.addEventListener('click', () => {
        controls.toggleRepeat();
        });


        audio.onended = () => {
        // Once a song is over play next song.
        controls.next();
        };
        audio.ontimeupdate = () => {
        trackingSlider.value = audio.currentTime;
        controls.updateSongRangeValues();
        };

        // Update the range values on change or moving the scrubber.
        trackingSlider.addEventListener('change', () => {
        controls.updateSongRangeValues();
        controls.seek();
        });
        trackingSlider.addEventListener('mousemove', () => {
        controls.updateSongRangeValues();
        });

        volumeSlider.addEventListener('change', () => {
        controls.adjustVolume();
        });
        volumeSlider.addEventListener('mousemove', () => {
        controls.adjustVolume();
        });

        // That's right ... hotkeys!
        document.onkeypress = (event) => {
        switch (event.keyCode) {
            // a - previous
            case 97: {
            controls.previous();
            break;
            }
            // d / n - next
            case 100:
            case 110: {
            controls.next();
            break;
            }
            // s / p - play / pause
            case 115:
            case 112: {
            controls.playPause();
            break;
            }
            // e / r - repeat
            case 101:
            case 114: {
            controls.toggleRepeat();
            break;
            }
            // q - shuffle
            case 113: {
            controls.toggleShuffle();
            break;
            }
        }
        };


        /**
         * Build the playlist from the give array of songs.
         */
        function buildPlaylist() {
            // Add the songs to the dom
            let html = '';
            songList.forEach((song, index) => {
                html += `
                    <tr data-index="${index}">
                        <td class="play-pause"><img src="${song.album.art.square}"></td>
                        <td class="song-title">${song.title} <span class="premium-badge">Premium</span></td>
                        <td>${song.artist}</td>
                        <td class="options-dropdown">
                            <button class="dots-button" onclick="toggleDropdown(${index})">&#8286;</button>
                            <ul class="dropdown-menu" id="dr-item-${index}">
                                <li>
                                    <div class="custom-checkbox btn btn-secondary" onclick="toggleFavorite(${index})">
                                        <input type="checkbox" id="id-of-input-${index}" hidden/>
                                        <i class="fa fa-heart-o"></i>
                                        <span>Add to Favorite</span>
                                    </div>  
                                </li>
                                <hr>
                                <li>
                                    <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#lyricsModal-${index}">
                                        View Lyrics
                                    </button>
                                </li>
                            </ul>
                        </td>
                    </tr>
                `;
                function toggleDropdown(index) {
                    var dropdownMenu = document.getElementById(`dr-item-${index}`);
                    dropdownMenu.classList.toggle('show');
                }

                // JavaScript function to toggle the favorite checkbox
                function toggleFavorite(index) {
                    var checkbox = document.querySelector(`#id-of-input-${index}`);
                    var heartIcon = document.querySelector(`#dr-item-${index} .fa`);
                    var isChecked = checkbox.checked;

                    if (isChecked) {
                        checkbox.checked = false;
                        heartIcon.classList.remove('fa-heart');
                        heartIcon.classList.add('fa-heart-o');
                        alert("Removed from Favorites");
                    } else {
                        checkbox.checked = true;
                        heartIcon.classList.remove('fa-heart-o');
                        heartIcon.classList.add('fa-heart');
                        alert("Added to Favorites");
                    }
                }
            });
            playlistBody.innerHTML = html;
            // JavaScript function to toggle the dropdown menu
            function toggleDropdown(index) {
                var dropdownMenu = document.getElementById(`dr-item-${index}`);
                dropdownMenu.classList.toggle('show');
            }

            // JavaScript function to toggle the favorite checkbox
            function toggleFavorite(index) {
                var checkbox = document.querySelector(`#id-of-input-${index}`);
                var heartIcon = document.querySelector(`#dr-item-${index} .fa`);
                var isChecked = checkbox.checked;

                if (isChecked) {
                    checkbox.checked = false;
                    heartIcon.classList.remove('fa-heart');
                    heartIcon.classList.add('fa-heart-o');
                    alert("Removed from Favorites");
                } else {
                    checkbox.checked = true;
                    heartIcon.classList.remove('fa-heart-o');
                    heartIcon.classList.add('fa-heart');
                    alert("Added to Favorites");
                }
            }

            // Close the dropdown menu when clicking outside of it
            document.addEventListener('click', function (event) {
                if (!event.target.matches('.dots-button')) {
                    var dropdowns = document.getElementsByClassName('dropdown-menu');
                    for (var i = 0; i < dropdowns.length; i++) {
                        var openDropdown = dropdowns[i];
                        if (openDropdown.classList.contains('show')) {
                            openDropdown.classList.remove('show');
                        }
                    }
                }
            });

            // Prevent the dropdown from closing when clicking inside it
            document.getElementById('album-buttons').addEventListener('click', function (event) {
                event.stopPropagation();
            });


            // Update the list items
            listItems = document.querySelectorAll('#playlist tbody tr');
            playlistPlay = document.querySelectorAll('#playlist .play-pause');

            // Add event listeners to the list items
            for (const listItem of listItems) {
                listItem.addEventListener('click', (event) => {
                const songIndex = event.target.parentElement.dataset.index;
                controls.updateSong(songIndex);

                if (controls.playing) {
                    controls.play();
                }
                });

                listItem.addEventListener('dblclick', (event) => {
                event.preventDefault();
                event.stopPropagation();

                if (!controls.playing) {
                    controls.playPause();
                }
                });
            }

            for (const playlistPlayButton of playlistPlay) {
                playlistPlayButton.addEventListener('click', (event) => {
                if (!controls.playing) {
                    controls.playPause();
                }
                });
            }
            }


            // Initiate the setup.
            window.onload = () => {
            buildPlaylist();
            controls.updateSong();
            controls.adjustVolume();
        };
    </script>
    </div>
</body>
</html>